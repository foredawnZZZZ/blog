## 开发依赖与基本功能
一般都是通过vue-cli3初始化的项目：
```javascript
element-ui（饿了么UI组件库）
vue（框架）
vuex（数据流管理）
vue-router（路由导航）
axios（ajax发送）
babel-polyfill（兼容）

常见功能：
登录涉及的安全策略
权限设置与管理员
文件类型的导出
大文件或者多文件的上传和断点续传
Echarts图表
表单校验
级联菜单
表格操作
。。。。
目录结构和部分功能，技术栈都可以参卡后台管理系统的集成方案，vue-element-admin
后台的整个页面架构其实就是三个部分，头部可能包括面包屑导航，左侧侧边栏，右侧内容区
```

## 登录与权限
后台项目与其他项目相比权限与安全性是非常重要的，可以说是一个后台项目再搭建初始时就要考虑的，也就是说不同权限对应不同路由，同时侧边栏也需要根据不同的权限动态生成，大致思路：
 - 首先登录：输入完账号密码完成后，发送到服务器去做校验，通过会返回一个token，拿到token后再去根据这个token拉去userInfo（用户详细信息，权限）
 - 权限验证：通过token获取对应的role，动态的根据role生成对应权限路由进而生成左侧侧边栏（router.addRoutes）动态挂载路由（大部分的数据来源都是需要统一的数据流管理VUEX）

**token的存放：**一般都是存放在cookie中的，这样下次打开页面或刷新页面能够记住用户登录状态，但是一旦后台项目的重要性和访问性加大，cookie就会存在安全问题，为了保证与提升，token要存放在session中，当前tab关闭就会丢失，重新打开重新登录，后端也会在每周固定的一个时间点刷新token，让用户从新登录一遍，确保用户电脑挂机或者丢失造成账号滥用

**getCurrentUserInfo：** 登录成功后我们会在全局摆放路由守卫（官方提供6个钩子我们只用beforeEach）判断token，获取我们就需要获取基本信息了 说下为什么不把userInfo直接存储起来：假设我把用户权限和用户名也存在本地，我用另一台电脑修改了自己的用户名，之后再用存储之前userInfo的电脑登录，那么就会默认读取本地的cookie，不会去拉取最新的userInfo，所以现在的策略：页面会先从存储中判断有没有cookie，没有就从新跑一遍流程，重新登录，如果有根据token拉取userInfo，保证用户数据是最新的。当然如果是单点登录功能的话，存储本地就没啥问题，因为一台上线另一个设备就会被提下线，所以总会重新登录获取最新

**roles：** 思路：前端会有一份页面级的路由表，表示每个路由可访问的权限。当用户登录之后，通过token获取roles，根据roles算出对应路由调用addRoutes接口，挂载路由，但是仅仅是页面级的，再怎么前端主导都不会逃过后端权限验证，不同的权限用户显示不同的侧边栏和限制其所能进入的页面（就是按钮级别的），由于后端请求无论何种请求方式都在header里添加token，后端会判断token验证用户有没有权限执行该操作

**按钮级别的操作控制：**其实真正的按钮级别的操作不是特别的多，获取到roles后，前端去v-if就可以了，毕竟颗粒度的权限判断还是后端做的，如果一个页面有很多不同权限的按钮，更多的就是产品设计的是否合理了，怼他！搞一个自定义指令

**axios拦截器（登录拦截已经离不开它了）：**对于axios，更多的操作是再请求和响应拦截器上，请求拦截上再头部加token，响应拦截上当服务端返回特殊码，没权限token失效做统一操作